<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Details</title>
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/details/body-top.css">
    <link rel="stylesheet" href="css/details/body-bottom.css">
    <link rel="stylesheet" href="css/footer.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Montserrat"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script
      src="https://kit.fontawesome.com/fbda8849fb.js"
      crossorigin="anonymous"
    ></script>
    <script src="js/commonLayout.js"></script>
    <script src="js/loadSetting.js"></script>
  </head>
  <body>

    <header></header>

    <!-- Body -->
    <div id="body" class="body">

      <!-- Body top -->
      <div class="body-top">

        <div class="top-left"></div>

        <div class="top-right">
          <div class="content">
            <div class="content-title"></div>
            <div class="content-price"></div>
            <hr />
            <div class="content-details">
              <span>Design details:</span>
            </div>
            <div class="content-info">
              <p></p>
            </div>
            <div class="content-quantity">
                <div class="quantity-title">
                    <span>Quantity:</span>
                </div>
                <div class="quantity-change">
                    <input id="quantity_cart_item" type="text" value="1">
                    <button type="button" class="btn-increase">+</button>
                    <button type="button" class="btn-decrease">-</button>
                </div>
            </div>
            <div class="content-btn">
                <button id="btn_addToCart" class="btn-add">ADD TO CARD</button>
                <button class="btn-order">ORDER NOW</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Body bottom -->
      <div class="body-bottom">
        <div class="bottom-title">
          <h1>OTHER PRODUCTS</h1>
        </div>
        <div class="bottom-content">

          <div class="card">
            <div class="card-img">
              <img src="imgs/body/body-products/flower1.png" alt="">
            </div>
            <div class="card-body">
            <div class="card-title">
              <h4>LOREM IPSUM DOLOR</h4>
            </div>
            <div class="card-content">
              <div class="card-price">$ 27.00</div>
              <div class="card-heart">
                <img src="imgs/icons/heart.svg" alt="">
              </div>
            </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-img">
              <img src="imgs/body/body-products/flower1.png" alt="">
            </div>
            <div class="card-body">
            <div class="card-title">
              <h4>LOREM IPSUM DOLOR</h4>
            </div>
            <div class="card-content">
              <div class="card-price">$ 27.00</div>
              <div class="card-heart">
                <img src="imgs/icons/heart.svg" alt="">
              </div>
            </div>
            </div>
          </div>

          <div class="card">
            <div class="card-img">
              <img src="imgs/body/body-products/flower1.png" alt="">
            </div>
            <div class="card-body">
            <div class="card-title">
              <h4>LOREM IPSUM DOLOR</h4>
            </div>
            <div class="card-content">
              <div class="card-price">$ 27.00</div>
              <div class="card-heart">
                <img src="imgs/icons/heart.svg" alt="">
              </div>
            </div>
            </div>
          </div>

          <div class="card">
            <div class="card-img">
              <img src="imgs/body/body-products/flower1.png" alt="">
            </div>
            <div class="card-body">
            <div class="card-title">
              <h4>LOREM IPSUM DOLOR</h4>
            </div>
            <div class="card-content">
              <div class="card-price">$ 27.00</div>
              <div class="card-heart">
                <img src="imgs/icons/heart.svg" alt="">
              </div>
            </div>
            </div>
          </div>

      </div>

    </div>

    <footer></footer>
  </body>

  <script>
      
      // const url = $(location).attr('href');
      // Get Id by web url
      const url = new URL(window.location.href);
      const id = url.searchParams.get('id');

      $.get(`https://localhost:7126/api/Products/${id}`,(response) => {
        renderProduct(response)
      }).fail( (status, error) => {
        $('.body-top').remove();
        $('.body-bottom').remove();
      });


      function renderProduct(response){
        $('.top-left').append(`<img src="https://localhost:7126${response.image1}" alt="" />`);
        const title = $('.content-title').append(`<h1>${response.productName}</h1>`);
        const price = $('.content-price').append(`<div>${response.price}</div>`);
        const detail = $('.content-detail').append(`<span>Design details:</span>`);
        const info = $('.content-info').append('<p>');
      }

      $(".btn-increase").click( (e) => {
            // get input 
            let input = $(e.target).parent().children()[0];
            // (int)
            let value = input.value;
            //convert to int
            let newValue = parseInt(value) + 1;
            input.value = newValue;
        });

        $(".btn-decrease").click((e) => {
            var input = $(e.target).parent().children()[0];

            var value = input.value;
            
            var newValue = parseInt(value);
            // check value not 0
            if (value > 1) {
                var newValue = parseInt(value) - 1;
            }
            input.value = newValue;
        });

      
    
  </script>
</html>
